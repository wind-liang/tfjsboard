{"version":3,"sources":["board.js"],"names":["window","board","level","pause","canvas","document","getElementById","context","getContext","paddleW","paddleX","paddleY","paddleSpeed","paddleWidth","paddleHeight","paddle","Image","src","onload","drawImage","move","direction","left","right","drawALL","temp","width","addEventListener","event","key","ballSpeedX","ballSpeedY","ballX","ballY","ball","ballWidth","clearRect","height","i","barrier","length","isLive","img","x","y","barrierWidth","barrierHeight","l","innerText","fps","isBorder","intersect","rect1","rect2","half1Width","half1Height","half2Width","half2Height","cen1","cen2","Math","abs","ballToPaddle","b","p","isOver","isPredicting","clearInterval","timeout","alert","init","hasInit","hasTrue","nextLevel","runloop","ballToBarrier","start","setInterval","sumLength","barrierNum","barrierStartY","j","push"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,KAAP,GAAe,EAAf;AACA,IAAIC,KAAK,GAAG,CAAZ;AACA,IAAIC,KAAK,GAAG,KAAZ;AACA,IAAIC,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAb;AACA,IAAIC,OAAO,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAd,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,OAAO,GAAG,GAAd;AACA,IAAIC,OAAO,GAAG,GAAd;AACA,IAAIC,OAAO,GAAG,GAAd;AACA,IAAIC,WAAW,GAAG,EAAlB;AACA,IAAIC,WAAW,GAAGJ,OAAlB;AACA,IAAIK,YAAY,GAAG,EAAnB;AACA,IAAIC,MAAM,GAAG,IAAIC,KAAJ,EAAb;AACAD,MAAM,CAACE,GAAP,GAAa,+DAAb;;AACAF,MAAM,CAACG,MAAP,GAAgB,YAAY;AACxBX,EAAAA,OAAO,CAACY,SAAR,CAAkBJ,MAAlB,EAA0BL,OAA1B,EAAmCC,OAAnC,EAA4CE,WAA5C,EAAyDC,YAAzD;AACH,CAFD;;AAKAb,KAAK,CAACmB,IAAN,GAAa,UAAUC,SAAV,EAAqB;AAG9B,MAAIA,SAAS,KAAK,EAAlB,EAAsB;AAClBpB,IAAAA,KAAK,CAACqB,IAAN;AACH,GAFD,MAGK,IAAID,SAAS,KAAK,EAAlB,EAAsB;AACvBpB,IAAAA,KAAK,CAACsB,KAAN;AACH,GAFI,MAIA,IAAIF,SAAS,KAAK,EAAlB,EAAsB;AACxBlB,IAAAA,KAAK,GAAG,CAACA,KAAT;AACF,GAZ6B,CAa9B;AACA;AACA;;AACH,CAhBD;;AAiBAF,KAAK,CAACqB,IAAN,GAAa,YAAY;AACrBZ,EAAAA,OAAO,IAAIE,WAAX;;AACA,MAAIF,OAAO,IAAI,CAAf,EAAkB;AACdc,IAAAA,OAAO;AACV,GAFD,MAGK;AACDd,IAAAA,OAAO,IAAIE,WAAX;AACAY,IAAAA,OAAO;AACV;AAEJ,CAVD;;AAWAvB,KAAK,CAACsB,KAAN,GAAc,YAAY;AACtB,MAAIE,IAAI,GAAGf,OAAO,GAAGE,WAAV,GAAwBC,WAAnC;;AACA,MAAIY,IAAI,IAAIrB,MAAM,CAACsB,KAAnB,EAA0B;AACtBF,IAAAA,OAAO;AACPd,IAAAA,OAAO,GAAGA,OAAO,GAAGE,WAApB;AACH,GAHD,MAIK;AACDY,IAAAA,OAAO;AACV;AAEJ,CAVD;;AAWAxB,MAAM,CAAC2B,gBAAP,CAAwB,SAAxB,EAAmC,UAAUC,KAAV,EAAiB;AAChD,MAAIA,KAAK,CAACC,GAAN,KAAc,GAAlB,EAAuB;AACnB5B,IAAAA,KAAK,CAACqB,IAAN;AACH,GAFD,MAGK,IAAIM,KAAK,CAACC,GAAN,KAAc,GAAlB,EAAuB;AACxB5B,IAAAA,KAAK,CAACsB,KAAN;AACH,GAFI,MAGA,IAAIK,KAAK,CAACC,GAAN,KAAc,GAAlB,EAAuB;AACxB1B,IAAAA,KAAK,GAAG,CAACA,KAAT;AACH;AACJ,CAVD,GAYA;;AACA,IAAI2B,UAAU,GAAG,CAAjB;AACA,IAAIC,UAAU,GAAG,CAAjB;AACA,IAAIC,KAAK,GAAG,GAAZ;AACA,IAAIC,KAAK,GAAG,GAAZ,EACA;;AACA,IAAIC,IAAI,GAAG,IAAIlB,KAAJ,EAAX;AACA,IAAImB,SAAS,GAAG,EAAhB;;AACA,IAAIX,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtBjB,EAAAA,OAAO,CAAC6B,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBhC,MAAM,CAACsB,KAA/B,EAAsCtB,MAAM,CAACiC,MAA7C;AACA9B,EAAAA,OAAO,CAACY,SAAR,CAAkBJ,MAAlB,EAA0BL,OAA1B,EAAmCC,OAAnC,EAA4CE,WAA5C,EAAyDC,YAAzD;AACAP,EAAAA,OAAO,CAACY,SAAR,CAAkBe,IAAlB,EAAwBF,KAAxB,EAA+BC,KAA/B,EAAsCE,SAAtC,EAAiDA,SAAjD;;AACA,OAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,OAAO,CAACC,MAA5B,EAAoCF,CAAC,EAArC,EAAyC;AACrC,QAAIC,OAAO,CAACD,CAAD,CAAP,CAAWG,MAAf,EAAuB;AACnBlC,MAAAA,OAAO,CAACY,SAAR,CAAkBuB,GAAlB,EAAuBH,OAAO,CAACD,CAAD,CAAP,CAAWK,CAAlC,EAAsCJ,OAAO,CAACD,CAAD,CAAP,CAAWM,CAAjD,EACMC,YADN,EACoBC,aADpB;AAEH;AACJ;;AACD,MAAIC,CAAC,GAAG1C,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAR;AACAyC,EAAAA,CAAC,CAACC,SAAF,GAAc,WAAW9C,KAAzB;AACH,CAZD;;AAaAgC,IAAI,CAACjB,GAAL,GAAW,6DAAX;;AAEAiB,IAAI,CAAChB,MAAL,GAAc,YAAY;AACtBX,EAAAA,OAAO,CAACY,SAAR,CAAkBe,IAAlB,EAAwBF,KAAxB,EAA+BC,KAA/B,EAAsCE,SAAtC,EAAiDA,SAAjD;AACH,CAFD;;AAGA,IAAIc,GAAG,GAAG,EAAV;;AACA,IAAIC,QAAQ,GAAG,SAAXA,QAAW,GAAY;AAEvB,MAAIlB,KAAK,GAAG,CAAR,IAAaA,KAAK,GAAGG,SAAR,GAAoB/B,MAAM,CAACsB,KAA5C,EAAmD;AAC/CI,IAAAA,UAAU,IAAI,CAAC,CAAf;AACH;;AACD,MAAIG,KAAK,GAAG,CAAZ,EAAe;AACXF,IAAAA,UAAU,IAAI,CAAC,CAAf;AACH;AAEJ,CATD;;AAUA,IAAIoB,SAAS,GAAG,SAAZA,SAAY,CAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AACpC,MAAIC,UAAU,GAAGF,KAAK,CAAC1B,KAAN,GAAc,CAA/B;AACA,MAAI6B,WAAW,GAAGH,KAAK,CAACf,MAAN,GAAe,CAAjC;AACA,MAAImB,UAAU,GAAGH,KAAK,CAAC3B,KAAN,GAAc,CAA/B;AACA,MAAI+B,WAAW,GAAGJ,KAAK,CAAChB,MAAN,GAAe,CAAjC;AACA,MAAIqB,IAAI,GAAG;AACHf,IAAAA,CAAC,EAAES,KAAK,CAACT,CAAN,GAAUW,UADV;AAEHV,IAAAA,CAAC,EAAEQ,KAAK,CAACR,CAAN,GAAUW;AAFV,GAAX;AAIA,MAAII,IAAI,GAAG;AACHhB,IAAAA,CAAC,EAAEU,KAAK,CAACV,CAAN,GAAUa,UADV;AAEHZ,IAAAA,CAAC,EAAES,KAAK,CAACT,CAAN,GAAUa;AAFV,GAAX;AAKA,SAAOG,IAAI,CAACC,GAAL,CAASF,IAAI,CAAChB,CAAL,GAASe,IAAI,CAACf,CAAvB,KAA6BW,UAAU,GAAGE,UAA1C,IACHI,IAAI,CAACC,GAAL,CAASF,IAAI,CAACf,CAAL,GAASc,IAAI,CAACd,CAAvB,KAA6BW,WAAW,GAAGE,WAD/C;AAEH,CAhBD;;AAkBA,IAAIK,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC3B,MAAIC,CAAC,GAAG,EAAR;AACAA,EAAAA,CAAC,CAACpB,CAAF,GAAMX,KAAN;AACA+B,EAAAA,CAAC,CAACnB,CAAF,GAAMX,KAAN;AACA8B,EAAAA,CAAC,CAACrC,KAAF,GAAUS,SAAV;AACA4B,EAAAA,CAAC,CAAC1B,MAAF,GAAWF,SAAX;AACA,MAAI6B,CAAC,GAAG,EAAR;AACAA,EAAAA,CAAC,CAACrB,CAAF,GAAMjC,OAAN;AACAsD,EAAAA,CAAC,CAACpB,CAAF,GAAMjC,OAAN;AACAqD,EAAAA,CAAC,CAACtC,KAAF,GAAUb,WAAV;AACAmD,EAAAA,CAAC,CAAC3B,MAAF,GAAWvB,YAAX;;AACA,MAAIqC,SAAS,CAACY,CAAD,EAAIC,CAAJ,CAAb,EAAqB;AACjB,QAAID,CAAC,CAACpB,CAAF,GAAMqB,CAAC,CAACrB,CAAF,GAAMqB,CAAC,CAACtC,KAAF,GAAU,CAAV,GAAc,CAA1B,IAA+BI,UAAU,GAAG,CAAhD,EAAmD;AAC/CA,MAAAA,UAAU,IAAI,CAAC,CAAf;AACH;;AACD,QAAIiC,CAAC,CAACpB,CAAF,GAAMqB,CAAC,CAACrB,CAAF,GAAMqB,CAAC,CAACtC,KAAF,GAAU,CAAV,GAAc,CAA1B,IAA+BI,UAAU,GAAG,CAAhD,EAAmD;AAC/CA,MAAAA,UAAU,IAAI,CAAC,CAAf;AACH;;AAEDC,IAAAA,UAAU,IAAI,CAAC,CAAf;AACH;AACJ,CArBD;;AAuBA,IAAIkC,MAAM,GAAG,SAATA,MAAS,GAAY;AACrB,MAAIhC,KAAK,IAAItB,OAAO,GAAGG,YAAvB,EAAqC;AACjCd,IAAAA,MAAM,CAACkE,YAAP,GAAsB,KAAtB;AACAC,IAAAA,aAAa,CAACnE,MAAM,CAACC,KAAP,CAAamE,OAAd,CAAb;AACAC,IAAAA,KAAK,CAAC,OAAD,CAAL;AACAC,IAAAA,IAAI;AACJC,IAAAA,OAAO,GAAG,IAAV;AACH;;AACD,MAAIC,OAAO,GAAG,KAAd;;AACA,OAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,OAAO,CAACC,MAA5B,EAAoCF,CAAC,EAArC,EAAyC;AACrC,QAAIC,OAAO,CAACD,CAAD,CAAP,CAAWG,MAAf,EAAuB;AACnB+B,MAAAA,OAAO,GAAG,IAAV;AACA;AACH;AACJ;;AACD,MAAI,CAACA,OAAL,EAAc;AACVxE,IAAAA,MAAM,CAACkE,YAAP,GAAsB,KAAtB;AACAC,IAAAA,aAAa,CAACnE,MAAM,CAACC,KAAP,CAAamE,OAAd,CAAb;AACAC,IAAAA,KAAK,CAAC,YAAD,CAAL;AACAI,IAAAA,SAAS;AACTF,IAAAA,OAAO,GAAG,IAAV;AACH;AAGJ,CAxBD;;AAyBA,IAAIG,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtB;AACD;AAEC,MAAI,CAACvE,KAAL,EAAY;AACR6B,IAAAA,KAAK,IAAIF,UAAT;;AACA,QAAIE,KAAK,IAAI,CAAT,IAAcF,UAAU,GAAG,CAA/B,EAAkC;AAC9BE,MAAAA,KAAK,GAAG,CAAR;AACH;;AACD,QAAIA,KAAK,IAAI,GAAT,IAAgBF,UAAU,GAAG,CAAjC,EAAoC;AAChCE,MAAAA,KAAK,GAAG,GAAR;AACH;;AACDC,IAAAA,KAAK,IAAIF,UAAT,CARQ,CASR;AACA;;AACAmB,IAAAA,QAAQ;AACRY,IAAAA,YAAY;AACZa,IAAAA,aAAa;AACbV,IAAAA,MAAM;AACNzC,IAAAA,OAAO;AACV,GApBqB,CAsBxB;;AACD,CAvBD;;AAyBA,IAAI8C,IAAI,GAAG,SAAPA,IAAO,GAAY;AACnBpE,EAAAA,KAAK,GAAG,CAAR;AACA4B,EAAAA,UAAU,GAAG,CAAb;AACAC,EAAAA,UAAU,GAAG,CAAb;AACAC,EAAAA,KAAK,GAAG,GAAR;AACAC,EAAAA,KAAK,GAAG,GAAR;AACAE,EAAAA,SAAS,GAAG,EAAZ;AAEAzB,EAAAA,OAAO,GAAG,GAAV;AACAC,EAAAA,OAAO,GAAG,GAAV;AACAC,EAAAA,WAAW,GAAG,EAAd;AACAC,EAAAA,WAAW,GAAGJ,OAAd;AACAK,EAAAA,YAAY,GAAG,EAAf;;AAEA,OAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,OAAO,CAACC,MAA5B,EAAoCF,CAAC,EAArC,EAAyC;AACrCC,IAAAA,OAAO,CAACD,CAAD,CAAP,CAAWG,MAAX,GAAoB,IAApB;AACH;AACJ,CAjBD;;AAmBA,IAAIgC,SAAS,GAAG,SAAZA,SAAY,GAAY;AACxB3C,EAAAA,UAAU,GAAG,CAAb;AACAC,EAAAA,UAAU,GAAG,CAAb;AACAC,EAAAA,KAAK,GAAG,GAAR;AACAC,EAAAA,KAAK,GAAG,GAAR;AACAE,EAAAA,SAAS,GAAG,EAAZ;AAEAzB,EAAAA,OAAO,GAAG,GAAV;AACAC,EAAAA,OAAO,GAAG,GAAV;AACAC,EAAAA,WAAW,IAAI,CAAf;AACAC,EAAAA,WAAW,IAAI,EAAf;AACAC,EAAAA,YAAY,IAAI,CAAhB;AACAZ,EAAAA,KAAK,IAAI,CAAT;;AACA,OAAK,IAAIoC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,OAAO,CAACC,MAA5B,EAAoCF,CAAC,EAArC,EAAyC;AACrCC,IAAAA,OAAO,CAACD,CAAD,CAAP,CAAWG,MAAX,GAAoB,IAApB;AACH;;AACD,MAAI5B,WAAW,IAAI,CAAnB,EAAsB;AAClBwD,IAAAA,KAAK,CAAC,OAAD,CAAL;AACAC,IAAAA,IAAI;AACP;AAEJ,CArBD,EAsBA;AACA;AACA;;;AACA,IAAIC,OAAO,GAAG,KAAd;AACAvE,MAAM,CAACC,KAAP,CAAamE,OAAb;;AACApE,MAAM,CAACC,KAAP,CAAa2E,KAAb,GAAqB,YAAY;AAC7B,MAAI,CAACL,OAAL,EAAa;AACRD,IAAAA,IAAI;AACR,GAH4B,CAK9B;;;AACCtE,EAAAA,MAAM,CAACC,KAAP,CAAamE,OAAb,GAAuBS,WAAW,CAAC,YAAY;AAC3CH,IAAAA,OAAO;AACV,GAFiC,EAE/B,OAAOzB,GAFwB,CAAlC;AAGH,CATD;;AAWA,IAAI6B,SAAS,GAAG1E,MAAM,CAACsB,KAAvB;AACA,IAAIqD,UAAU,GAAG,CAAjB;AACA,IAAIlC,YAAY,GAAGiC,SAAS,GAAGC,UAA/B;AACA,IAAIjC,aAAa,GAAG,EAApB;AACA,IAAIkC,aAAa,GAAG,EAApB;AACA,IAAIzC,OAAO,GAAG,EAAd;;2BACS0C;+BACI3C;AACDI,IAAAA,GAAG,GAAG,IAAI1B,KAAJ;AACV0B,IAAAA,GAAG,CAACzB,GAAJ,GAAU,gEAAV;;AACAyB,IAAAA,GAAG,CAACxB,MAAJ,GAAa,YAAY;AACrBX,MAAAA,OAAO,CAACY,SAAR,CAAkBuB,GAAlB,EAAuBJ,CAAC,GAAGO,YAA3B,EAAyCmC,aAAa,GAAGC,CAAC,GAAGnC,aAA7D,EAA4ED,YAA5E,EAA0FC,aAA1F;AACH,KAFD;;AAGIiB,IAAAA,CAAC,GAAG;AAACrB,MAAAA,GAAG,EAAEA,GAAN;AAAWD,MAAAA,MAAM,EAAE,IAAnB;AAAyBE,MAAAA,CAAC,EAAEL,CAAC,GAAGO,YAAhC;AAA8CD,MAAAA,CAAC,EAAEoC,aAAa,GAAGC,CAAC,GAAGnC;AAArE;AACRP,IAAAA,OAAO,CAAC2C,IAAR,CAAanB,CAAb;;;AAPJ,OAAK,IAAIzB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,UAApB,EAAgCzC,CAAC,EAAjC,EAAqC;AAAA,WAA5BA,CAA4B;AAQpC;;;AATL,KAAK,IAAI2C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAAA,MAEhBvC,GAFgB;AAAA,MAOhBqB,CAPgB;;AAAA,QAAnBkB,CAAmB;AAU3B;;AACD,IAAIN,aAAa,GAAG,SAAhBA,aAAgB,GAAY;AAC5B,OAAK,IAAIrC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,OAAO,CAACC,MAA5B,EAAoCF,CAAC,EAArC,EAAyC;AACrC,QAAIC,OAAO,CAACD,CAAD,CAAP,CAAWG,MAAf,EAAuB;AACnB,UAAIsB,CAAC,GAAG,EAAR;AACAA,MAAAA,CAAC,CAACpB,CAAF,GAAMX,KAAN;AACA+B,MAAAA,CAAC,CAACnB,CAAF,GAAMX,KAAN;AACA8B,MAAAA,CAAC,CAACrC,KAAF,GAAUS,SAAV;AACA4B,MAAAA,CAAC,CAAC1B,MAAF,GAAWF,SAAX;AACA,UAAI6B,CAAC,GAAG,EAAR;AACAA,MAAAA,CAAC,CAACrB,CAAF,GAAMJ,OAAO,CAACD,CAAD,CAAP,CAAWK,CAAjB;AACAqB,MAAAA,CAAC,CAACpB,CAAF,GAAML,OAAO,CAACD,CAAD,CAAP,CAAWM,CAAjB;AACAoB,MAAAA,CAAC,CAACtC,KAAF,GAAUmB,YAAV;AACAmB,MAAAA,CAAC,CAAC3B,MAAF,GAAWvB,YAAX;;AACA,UAAIqC,SAAS,CAACY,CAAD,EAAIC,CAAJ,CAAb,EAAqB;AACjB,YAAID,CAAC,CAACpB,CAAF,GAAMqB,CAAC,CAACrB,CAAF,GAAMqB,CAAC,CAACtC,KAAF,GAAU,CAAV,GAAc,CAA1B,IAA+BI,UAAU,GAAG,CAAhD,EAAmD;AAC/CA,UAAAA,UAAU,IAAI,CAAC,CAAf;AACH;;AACD,YAAIiC,CAAC,CAACpB,CAAF,GAAMqB,CAAC,CAACrB,CAAF,GAAMqB,CAAC,CAACtC,KAAF,GAAU,CAAV,GAAc,CAA1B,IAA+BI,UAAU,GAAG,CAAhD,EAAmD;AAC/CA,UAAAA,UAAU,IAAI,CAAC,CAAf;AACH;;AACDS,QAAAA,OAAO,CAACD,CAAD,CAAP,CAAWG,MAAX,GAAoB,KAApB;AACAV,QAAAA,UAAU,IAAI,CAAC,CAAf;AACH;AACJ;AAEJ;AACJ,CA1BD","file":"board.e2ef20ef.map","sourceRoot":"..","sourcesContent":["window.board = {};\r\nvar level = 1;\r\nvar pause = false;\r\nvar canvas = document.getElementById('id-canvas');\r\nvar context = canvas.getContext('2d');\r\n//\r\n// var getCoordInDocument = function(e) {\r\n//     e = e || window.event;\r\n//     var x = e.pageX || (e.clientX +\r\n//       (document.documentElement.scrollLeft\r\n//       || document.body.scrollLeft));\r\n//     var y= e.pageY || (e.clientY +\r\n//       (document.documentElement.scrollTop\r\n//       || document.body.scrollTop));\r\n//     return {'x':x,'y':y};\r\n//   }\r\n// document.getElementById('id-canvas').onmouseup = function (oEvent) {\r\n//     if (!oEvent) {\r\n//         oEvent = window.event;\r\n//     }\r\n//     if (oEvent.button === 0) {\r\n//         var pointer = getCoordInDocument(oEvent);\r\n//         console.log(pointer.x + ' ' + pointer.y);\r\n//     }\r\n// };\r\nvar paddleW = 200;\r\nvar paddleX = 150;\r\nvar paddleY = 250;\r\nvar paddleSpeed = 10;\r\nvar paddleWidth = paddleW;\r\nvar paddleHeight = 25;\r\nvar paddle = new Image();\r\npaddle.src = 'https://tensorflow-pro.oss-cn-beijing.aliyuncs.com/paddle.jpg';\r\npaddle.onload = function () {\r\n    context.drawImage(paddle, paddleX, paddleY, paddleWidth, paddleHeight);\r\n};\r\n\r\n\r\nboard.move = function (direction) {\r\n\r\n\r\n    if (direction === 37) {\r\n        board.left();\r\n    }\r\n    else if (direction === 39) {\r\n        board.right();\r\n    }\r\n\r\n    else if (direction === 38) {\r\n       pause = !pause;\r\n    }\r\n    // else {\r\n    //\r\n    // }\r\n};\r\nboard.left = function () {\r\n    paddleX -= paddleSpeed;\r\n    if (paddleX >= 0) {\r\n        drawALL();\r\n    }\r\n    else {\r\n        paddleX += paddleSpeed;\r\n        drawALL();\r\n    }\r\n\r\n};\r\nboard.right = function () {\r\n    var temp = paddleX + paddleSpeed + paddleWidth;\r\n    if (temp <= canvas.width) {\r\n        drawALL();\r\n        paddleX = paddleX + paddleSpeed;\r\n    }\r\n    else {\r\n        drawALL();\r\n    }\r\n\r\n};\r\nwindow.addEventListener('keydown', function (event) {\r\n    if (event.key === 'a') {\r\n        board.left();\r\n    }\r\n    else if (event.key === 'd') {\r\n        board.right();\r\n    }\r\n    else if (event.key === 'p') {\r\n        pause = !pause;\r\n    }\r\n});\r\n\r\n// 球\r\nvar ballSpeedX = 1;\r\nvar ballSpeedY = 1;\r\nvar ballX = 150;\r\nvar ballY = 219;\r\n//var isKeeping = false;\r\nvar ball = new Image();\r\nvar ballWidth = 30;\r\nvar drawALL = function () {\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    context.drawImage(paddle, paddleX, paddleY, paddleWidth, paddleHeight);\r\n    context.drawImage(ball, ballX, ballY, ballWidth, ballWidth);\r\n    for (let i = 0; i < barrier.length; i++) {\r\n        if (barrier[i].isLive) {\r\n            context.drawImage(img, barrier[i].x , barrier[i].y\r\n                , barrierWidth, barrierHeight);\r\n        }\r\n    }\r\n    var l = document.getElementById('level');\r\n    l.innerText = 'Level ' + level;\r\n};\r\nball.src = 'https://tensorflow-pro.oss-cn-beijing.aliyuncs.com/ball.png';\r\n\r\nball.onload = function () {\r\n    context.drawImage(ball, ballX, ballY, ballWidth, ballWidth);\r\n};\r\nvar fps = 60;\r\nvar isBorder = function () {\r\n\r\n    if (ballX < 0 || ballX + ballWidth > canvas.width) {\r\n        ballSpeedX *= -1;\r\n    }\r\n    if (ballY < 0) {\r\n        ballSpeedY *= -1;\r\n    }\r\n\r\n};\r\nvar intersect = function (rect1, rect2) {\r\n    var half1Width = rect1.width / 2;\r\n    var half1Height = rect1.height / 2;\r\n    var half2Width = rect2.width / 2;\r\n    var half2Height = rect2.height / 2;\r\n    var cen1 = {\r\n            x: rect1.x + half1Width,\r\n            y: rect1.y + half1Height\r\n        };\r\n    var cen2 = {\r\n            x: rect2.x + half2Width,\r\n            y: rect2.y + half2Height\r\n        };\r\n\r\n    return Math.abs(cen2.x - cen1.x) <= half1Width + half2Width\r\n     && Math.abs(cen2.y - cen1.y) <= half1Height + half2Height;\r\n};\r\n\r\nvar ballToPaddle = function () {\r\n    var b = {};\r\n    b.x = ballX;\r\n    b.y = ballY;\r\n    b.width = ballWidth;\r\n    b.height = ballWidth;\r\n    var p = {};\r\n    p.x = paddleX;\r\n    p.y = paddleY;\r\n    p.width = paddleWidth;\r\n    p.height = paddleHeight;\r\n    if (intersect(b, p)) {\r\n        if (b.x < p.x + p.width * 1 / 4 && ballSpeedX > 0) {\r\n            ballSpeedX *= -1;\r\n        }\r\n        if (b.x > p.x + p.width * 3 / 4 && ballSpeedX < 0) {\r\n            ballSpeedX *= -1;\r\n        }\r\n\r\n        ballSpeedY *= -1;\r\n    }\r\n};\r\n\r\nvar isOver = function () {\r\n    if (ballY >= paddleY + paddleHeight) {\r\n        window.isPredicting = false;\r\n        clearInterval(window.board.timeout);\r\n        alert('游戏结束！');\r\n        init();\r\n        hasInit = true;\r\n    }\r\n    let hasTrue = false;\r\n    for (let i = 0; i < barrier.length; i++) {\r\n        if (barrier[i].isLive) {\r\n            hasTrue = true;\r\n            break;\r\n        }\r\n    }\r\n    if (!hasTrue) {\r\n        window.isPredicting = false;\r\n        clearInterval(window.board.timeout);\r\n        alert('游戏胜利！进入下一关');\r\n        nextLevel();\r\n        hasInit = true;\r\n    }\r\n\r\n\r\n};\r\nvar runloop = function () {\r\n    // events\r\n   // if (isKeeping) {\r\n\r\n    if (!pause) {\r\n        ballX += ballSpeedX;\r\n        if (ballX <= 0 && ballSpeedX > 0) {\r\n            ballX = 1;\r\n        }\r\n        if (ballX >= 362 && ballSpeedX < 0) {\r\n            ballX = 360;\r\n        }\r\n        ballY -= ballSpeedY;\r\n        // console.log(ballX + ' ' +ballY)\r\n        // console.log(ballSpeedX)\r\n        isBorder();\r\n        ballToPaddle();\r\n        ballToBarrier();\r\n        isOver();\r\n        drawALL();\r\n    }\r\n\r\n  //  }\r\n};\r\n\r\nvar init = function () {\r\n    level = 1;\r\n    ballSpeedX = 3;\r\n    ballSpeedY = 3;\r\n    ballX = 150;\r\n    ballY = 219;\r\n    ballWidth = 30;\r\n\r\n    paddleX = 150;\r\n    paddleY = 250;\r\n    paddleSpeed = 15;\r\n    paddleWidth = paddleW;\r\n    paddleHeight = 25;\r\n\r\n    for (let i = 0; i < barrier.length; i++) {\r\n        barrier[i].isLive = true;\r\n    }\r\n};\r\n\r\nvar nextLevel = function () {\r\n    ballSpeedX = 3;\r\n    ballSpeedY = 3;\r\n    ballX = 150;\r\n    ballY = 219;\r\n    ballWidth = 30;\r\n\r\n    paddleX = 150;\r\n    paddleY = 250;\r\n    paddleSpeed += 2;\r\n    paddleWidth -= 30;\r\n    paddleHeight -= 1;\r\n    level += 1;\r\n    for (let i = 0; i < barrier.length; i++) {\r\n        barrier[i].isLive = true;\r\n    }\r\n    if (paddleWidth <= 0) {\r\n        alert('恭喜通关！');\r\n        init();\r\n    }\r\n\r\n};\r\n// setTimeout(function () {\r\n//     runloop();\r\n// }, 1000 / fps);\r\nvar hasInit = false;\r\nwindow.board.timeout;\r\nwindow.board.start = function () {\r\n    if (!hasInit){\r\n         init();\r\n    }\r\n\r\n   // isKeeping = true;\r\n    window.board.timeout = setInterval(function () {\r\n        runloop();\r\n    }, 1000 / fps);\r\n};\r\n\r\nvar sumLength = canvas.width;\r\nvar barrierNum = 8;\r\nvar barrierWidth = sumLength / barrierNum;\r\nvar barrierHeight = 30;\r\nvar barrierStartY = 60;\r\nvar barrier = [];\r\nfor (let j = 0; j < 2; j++) {\r\n    for (let i = 0; i < barrierNum; i++) {\r\n        var img = new Image();\r\n        img.src = 'https://tensorflow-pro.oss-cn-beijing.aliyuncs.com/barrier.jpg';\r\n        img.onload = function () {\r\n            context.drawImage(img, i * barrierWidth, barrierStartY + j * barrierHeight, barrierWidth, barrierHeight);\r\n        };\r\n        var b = {img: img, isLive: true, x: i * barrierWidth, y: barrierStartY + j * barrierHeight};\r\n        barrier.push(b);\r\n    }\r\n}\r\nvar ballToBarrier = function () {\r\n    for (let i = 0; i < barrier.length; i++) {\r\n        if (barrier[i].isLive) {\r\n            var b = {};\r\n            b.x = ballX;\r\n            b.y = ballY;\r\n            b.width = ballWidth;\r\n            b.height = ballWidth;\r\n            var p = {};\r\n            p.x = barrier[i].x;\r\n            p.y = barrier[i].y;\r\n            p.width = barrierWidth;\r\n            p.height = paddleHeight;\r\n            if (intersect(b, p)) {\r\n                if (b.x < p.x + p.width * 1 / 4 && ballSpeedX > 0) {\r\n                    ballSpeedX *= -1;\r\n                }\r\n                if (b.x > p.x + p.width * 3 / 4 && ballSpeedX < 0) {\r\n                    ballSpeedX *= -1;\r\n                }\r\n                barrier[i].isLive = false;\r\n                ballSpeedY *= -1;\r\n            }\r\n        }\r\n\r\n    }\r\n};\r\n"]}