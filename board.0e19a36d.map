{"version":3,"sources":["board.js"],"names":["window","board","canvas","document","getElementById","context","getContext","paddleW","paddleX","paddleY","paddleSpeed","paddleWidth","paddleHeight","paddle","Image","src","onload","drawImage","move","direction","left","right","drawALL","temp","width","addEventListener","event","key","ballSpeedX","ballSpeedY","ballX","ballY","ball","ballWidth","clearRect","height","fps","isBorder","intersect","rect1","rect2","half1Width","half1Height","half2Width","half2Height","cen1","x","y","cen2","Math","abs","ballToPaddle","b","p","isOver","isPredicting","clearInterval","timeout","alert","init","runloop","console","log","start","setInterval"],"mappings":"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","file":"board.0e19a36d.map","sourceRoot":"..","sourcesContent":["window.board = {};\r\nvar canvas = document.getElementById('id-canvas');\r\nvar context = canvas.getContext('2d');\r\n//\r\n// var getCoordInDocument = function(e) {\r\n//     e = e || window.event;\r\n//     var x = e.pageX || (e.clientX +\r\n//       (document.documentElement.scrollLeft\r\n//       || document.body.scrollLeft));\r\n//     var y= e.pageY || (e.clientY +\r\n//       (document.documentElement.scrollTop\r\n//       || document.body.scrollTop));\r\n//     return {'x':x,'y':y};\r\n//   }\r\n// document.getElementById('id-canvas').onmouseup = function (oEvent) {\r\n//     if (!oEvent) {\r\n//         oEvent = window.event;\r\n//     }\r\n//     if (oEvent.button === 0) {\r\n//         var pointer = getCoordInDocument(oEvent);\r\n//         console.log(pointer.x + ' ' + pointer.y);\r\n//     }\r\n// };\r\nvar paddleW = 150;\r\nvar paddleX = 150;\r\nvar paddleY = 250;\r\nvar paddleSpeed = 10;\r\nvar paddleWidth = paddleW;\r\nvar paddleHeight = 25;\r\nvar paddle = new Image();\r\npaddle.src = 'https://tensorflow-pro.oss-cn-beijing.aliyuncs.com/paddle.jpg';\r\npaddle.onload = function () {\r\n    context.drawImage(paddle, paddleX, paddleY, paddleWidth, paddleHeight);\r\n};\r\n\r\n\r\nboard.move = function (direction) {\r\n\r\n    if (direction === 37) {\r\n        board.left();\r\n    }\r\n    else if (direction === 39) {\r\n        board.right();\r\n    }\r\n\r\n\r\n    // else if (direction === 38) {\r\n    //     drawALL();\r\n    // }\r\n    // else {\r\n    //\r\n    // }\r\n};\r\nboard.left = function () {\r\n    paddleX -= paddleSpeed;\r\n    if (paddleX >= 0) {\r\n        drawALL();\r\n    }\r\n    else {\r\n        paddleX += paddleSpeed;\r\n        drawALL();\r\n    }\r\n\r\n};\r\nboard.right = function () {\r\n    var temp = paddleX + paddleSpeed + paddleWidth;\r\n    if (temp <= canvas.width) {\r\n        drawALL();\r\n        paddleX = paddleX + paddleSpeed;\r\n    }\r\n    else {\r\n        drawALL();\r\n    }\r\n\r\n};\r\nwindow.addEventListener('keydown', function (event) {\r\n    if (event.key === 'a') {\r\n        board.left();\r\n    }\r\n    else if (event.key === 'd') {\r\n        board.right();\r\n    }\r\n});\r\n\r\n// 球\r\nvar ballSpeedX = 1;\r\nvar ballSpeedY = 1;\r\nvar ballX = 150;\r\nvar ballY = 219;\r\n//var isKeeping = false;\r\nvar ball = new Image();\r\nvar ballWidth = 30;\r\nvar drawALL = function () {\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    context.drawImage(paddle, paddleX, paddleY, paddleWidth, paddleHeight);\r\n    context.drawImage(ball, ballX, ballY, ballWidth, ballWidth);\r\n};\r\nball.src = 'https://tensorflow-pro.oss-cn-beijing.aliyuncs.com/ball.png';\r\n\r\nball.onload = function () {\r\n    context.drawImage(ball, ballX, ballY, ballWidth, ballWidth);\r\n};\r\nvar fps = 60;\r\nvar isBorder = function () {\r\n\r\n    if (ballX < 0 || ballX + ballWidth > canvas.width) {\r\n        ballSpeedX *= -1;\r\n    }\r\n    if (ballY < 0) {\r\n        ballSpeedY *= -1;\r\n    }\r\n\r\n};\r\nvar intersect = function (rect1, rect2) {\r\n    var half1Width = rect1.width / 2;\r\n    var half1Height = rect1.height / 2;\r\n    var half2Width = rect2.width / 2;\r\n    var half2Height = rect2.height / 2;\r\n    var cen1 = {\r\n            x: rect1.x + half1Width,\r\n            y: rect1.y + half1Height\r\n        };\r\n    var cen2 = {\r\n            x: rect2.x + half2Width,\r\n            y: rect2.y + half2Height\r\n        };\r\n\r\n    return Math.abs(cen2.x - cen1.x) <= half1Width + half2Width\r\n     && Math.abs(cen2.y - cen1.y) <= half1Height + half2Height;\r\n};\r\n\r\nvar ballToPaddle = function () {\r\n    var b = {};\r\n    b.x = ballX;\r\n    b.y = ballY;\r\n    b.width = ballWidth;\r\n    b.height = ballWidth;\r\n    var p = {};\r\n    p.x = paddleX;\r\n    p.y = paddleY;\r\n    p.width = paddleWidth;\r\n    p.height = paddleHeight;\r\n    if (intersect(b, p)) {\r\n        if (b.x < p.x + p.width * 1 / 4 && ballSpeedX > 0) {\r\n            ballSpeedX *= -1;\r\n        }\r\n        if (b.x > p.x + p.width * 3 / 4 && ballSpeedX < 0) {\r\n            ballSpeedX *= -1;\r\n        }\r\n\r\n        ballSpeedY *= -1;\r\n    }\r\n};\r\n\r\nvar isOver = function () {\r\n    if (ballY >= paddleY + paddleHeight) {\r\n        window.isPredicting = false;\r\n        clearInterval(window.board.timeout);\r\n        alert('游戏结束！');\r\n        init();\r\n\r\n    }\r\n};\r\nvar runloop = function () {\r\n    // events\r\n   // if (isKeeping) {\r\n\r\n    ballX += ballSpeedX;\r\n    if (ballX <= 0 && ballSpeedX > 0) {\r\n        ballX = 1;\r\n    }\r\n    ballY -= ballSpeedY;\r\n    console.log(ballX + ' ' +ballY)\r\n    console.log(ballSpeedX)\r\n    isBorder();\r\n    ballToPaddle();\r\n    isOver();\r\n    drawALL();\r\n  //  }\r\n};\r\n\r\nvar init = function () {\r\n    ballSpeedX = 3;\r\n    ballSpeedY = 3;\r\n    ballX = 150;\r\n    ballY = 219;\r\n    ballWidth = 30;\r\n\r\n    paddleX = 150;\r\n    paddleY = 250;\r\n    paddleSpeed = 10;\r\n    paddleWidth = paddleW;\r\n    paddleHeight = 25;\r\n};\r\n// setTimeout(function () {\r\n//     runloop();\r\n// }, 1000 / fps);\r\nwindow.board.timeout;\r\nwindow.board.start = function () {\r\n    init();\r\n   // isKeeping = true;\r\n    window.board.timeout = setInterval(function () {\r\n        runloop();\r\n    }, 1000 / fps);\r\n};\r\n"]}